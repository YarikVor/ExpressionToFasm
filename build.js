var r=function(){function g(){this.o=[];this.O=[];this.J=[];this.S=[]}g.prototype.ya=function(){var a=h;for(this.lastIndex=0;this.lastIndex<a.length;){for(var b=0,c=void 0;b<g.ka.length;b++){var d=g.ka[b];d.lastIndex=this.lastIndex;var e=d.exec(a);if(null!==e){c=e[0];this.lastIndex=d.lastIndex;break}}switch(b){case k.G:this.pa(c);break;case k.A:this.va(c);break;case k.nb:this.qa(c);break;case k.mb:this.na();break;case k.operator:this.ua(c);break;default:throw Error('\u0421\u0438\u043c\u0432\u043e\u043b "'.concat(a[this.lastIndex],
    '" \u043d\u0430 \u043f\u043e\u0437\u0438\u0446\u0456\u0457 ').concat(this.lastIndex," - \u043d\u0435\u0432\u0456\u0434\u043e\u043c\u0438\u0439 "));}}if(0!==this.J.length)for(;1<this.S.length;)a=new n(k.operator,this.J.pop().Y,this.S.pop(),this.S.pop()),this.S.push(a),this.o.push(a)};g.prototype.pa=function(a){this.S.push(new n(k.G,a))};g.prototype.va=function(a){var b=this.O.find(function(c){return c.text===a});void 0===b&&(b=new n(k.A,a),this.O.push(b));this.S.push(b)};g.prototype.ua=function(a){a=
    p.ja(a);if(0!=this.J.length&&"("!=this.J[this.J.length-1].Y&&!(this.J[this.J.length-1].priority<a.priority))for(;0!==this.J.length&&this.J[this.J.length-1].priority>=a.priority&&"("!==this.J[this.J.length-1].Y;){var b=new n(k.operator,this.J.pop().Y,this.S.pop(),this.S.pop());this.o.push(b);this.S.push(b)}this.J.push(a)};g.prototype.qa=function(a){this.J.push(p.ja(a))};g.prototype.na=function(){if(0!==this.J.length){for(;0!==this.J.length&&"("!==this.J[this.J.length-1].Y;){var a=new n(k.operator,
    this.J.pop().Y,this.S.pop(),this.S.pop());this.S.push(a);this.o.push(a)}this.J.pop()}};g.prototype.Ua=function(){for(var a=0;a<this.o.length;a++)for(var b=this.o[a],c=a+1;c<this.o.length;){var d=this.o[c];if(b.isEqual(d)){this.o.splice(c,1);for(var e=a+1;e<this.o.length;e++)this.o[e].Aa(d,b)}else c++}};g.ka=[new RegExp(/[0-9]+/y),new RegExp(/[a-zA-Z]+/y),new RegExp(/\+|-|\/|\*|\^/y),new RegExp(/\(/y),new RegExp(/\)/y)];return g}(),t=function(){function g(a){this.N=a;this.ga=document.getElementById("registers");
    document.getElementById("code");this.ca=document.getElementById("listVertex");this.ha=document.getElementById("var")}g.prototype.Va=function(){this.za();this.la()};g.prototype.eb=function(){this.N.Wa();this.fb();this.hb();this.la();this.gb()};g.prototype.la=function(){this.ga.innerHTML="";for(var a=0;a<this.N.u.length;a++){var b=this.N.u[a];this.ga.innerHTML+="".concat(b.name," = ").concat(null===b.top?"null":b.top.type===k.G||b.top.type===k.A?b.top.text:"["+(this.$(b.top)+1)+"]","<br/>")}};g.prototype.hb=
    function(){this.N.F<this.N.o.length&&this.ca.getElementsByTagName("li")[this.N.F].classList.add("active");this.ca.getElementsByTagName("li")[this.N.F-1].classList.remove("active");this.ca.getElementsByTagName("li")[this.N.F-1].classList.add("disabled")};g.prototype.gb=function(){this.ha.innerHTML="";for(var a=0;a<this.N.O.length;a++){var b=this.N.O[a];this.ha.innerHTML+="".concat(b.name," ").concat(null===b.top?"null":b.top.type===k.G||b.top.type===k.A?b.top.text:"["+(this.$(b.top)+1)+"]"," avaible: ").concat(b.U,
    "<br/>")}};g.prototype.za=function(){for(var a=0;a<this.N.o.length;a++){var b=this.N.o[a],c=document.createElement("li");c.innerHTML="".concat(b.left.type===k.G||b.left.type===k.A?b.left.text:"[".concat(this.$(b.left)+1,"]")," ").concat(b.text," ").concat(b.right.type===k.G||b.right.type===k.A?b.right.text:"[".concat(this.$(b.right)+1,"]"));this.ca.appendChild(c)}};g.prototype.$=function(a){for(var b=0;b<this.N.o.length;b++)if(this.N.o[b]===a)return b;return-1};g.prototype.fb=function(){document.getElementById("codearea").innerHTML=
    this.N.I.code};return g}(),u=function(){function g(){this.code=""}g.prototype.j=function(a,b){this.code+="mov ".concat(a,", ").concat(b)+"\n"};g.prototype.add=function(a,b){this.code+="add ".concat(a,", ").concat(b)+"\n"};g.prototype.B=function(a,b){this.code+="xchg ".concat(a,", ").concat(b)+"\n"};g.prototype.sub=function(a,b){this.code+="sub ".concat(a,", ").concat(b)+"\n"};g.prototype.T=function(a){this.code+="cwd\n";this.code+="idiv ".concat(a)+"\n"};g.prototype.imul=function(a){this.code+="imul ".concat(a)+
    "\n"};g.prototype.xor=function(a,b){this.code+="xor ".concat(a,", ").concat(b)+"\n"};return g}(),w=function(){function g(a){this.I=a}g.prototype.add=function(a,b,c){a.top===b.top&&a.top===c.top?this.I.add(a,a):b.top.isEqual(c.top)?(this.I.j(a,b),this.I.add(a,a)):a.top!==b.top&&a.top!==c.top?(this.I.j(a,b),this.I.add(a,c)):this.I.add(a.top===b.top?b:c,a.top!==b.top?b:c)};g.prototype.sub=function(a,b,c){a.top===b.top&&a.top===c.top||b.top.isEqual(c.top)?this.I.xor(a,a):a.top===b.top?this.I.sub(a,c):
    a.top!==b.top&&a.top!==c.top?(this.I.j(a,b),this.I.sub(a,c)):this.I.sub(a.top===b.top?b:c,a.top!==b.top?b:c)};g.prototype.j=function(a,b){a.top!==b.top&&(this.I.j(a,b),a.top=b.top)};g.prototype.T=function(a){this.I.T(a)};g.prototype.B=function(a,b){if(a.top!==b.top){this.I.B(a,b);var c=[b.top,a.top];a.top=c[0];b.top=c[1]}};g.prototype.imul=function(a){this.I.imul(a)};return g}(),z=function(){function g(a){this.o=a;this.I=new u;this.h=new w(this.I);this.F=0;this.W=10;this.H=3;this.u=[new x("AX"),new x("BX"),
    new x("CX"),new x("DX")];this.g=this.u[0];this.K=this.u[1];this.L=this.u[2];this.i=this.u[3];this.O=[];this.Ta()}g.prototype.Ta=function(){this.u[0].jb=!0;this.u[0].ib=!0;this.u[3].kb=!1};g.prototype.Wa=function(){this.I.code+="; "+(this.F+1)+"\n";var a=this.F;this.o[a].type===k.operator&&null!==this.o[a].left&&null!==this.o[a].right&&("+"===this.o[a].text?this.ma(this.o[a]):"-"===this.o[a].text?this.Xa(this.o[a]):"/"===this.o[a].text?this.Ca(this.o[a]):"*"===this.o[a].text&&this.Ma(this.o[a]));this.F++};
    g.prototype.$=function(a){for(var b=0;b<this.o.length;b++)if(this.o[b]===a)return b;return-1};g.prototype.ma=function(a){if(a.left.type===k.G&&a.right.type===k.G)this.oa(a);else if(a.left.type===k.operator&&a.right.type===k.G||a.left.type===k.G&&a.right.type===k.operator)this.ra(a);else if(a.left.type===k.operator&&a.right.type===k.operator)this.ta(a);else if(a.left.type===k.G&&a.right.type===k.A||a.right.type===k.G&&a.left.type===k.A)this.wa(a);else if(a.right.type===k.A&&a.left.type===k.A)this.xa(a);
    else if(a.right.type===k.A&&a.left.type===k.operator||a.right.type===k.operator&&a.left.type===k.A)this.sa(a);else throw Error("Error: Unknown operator");};g.prototype.oa=function(a){var b=this.l();this.h.add(b,a.left,a.right);b.top=a};g.prototype.ta=function(a){var b=this.C(a.left),c=this.C(a.right);var d=this.D(a.left,this.H);var e=this.D(a.right,this.H);if(null!==b&&null!==c)if(this.Z()&&this.s(a.left)&&this.s(a.right))d=this.l(b,c);else if(0==d){if(d=b,this.X(d.top)!==Number.POSITIVE_INFINITY){var f=
    this.R();this.h.j(f,d.top)}}else 0==e?(d=c,this.X(d.top)!==Number.POSITIVE_INFINITY&&(f=this.R(),this.h.j(f,d.top))):d=this.l(b,c);else{if(null===b){b=this.M(a.left);if(null===b)throw Error("Error: Cannot find variable");d&&(f=this.l(c),this.h.j(f,b),f.top=b.top,b=f)}if(null===c){c=this.M(a.right);if(null===c)throw Error("Error: Cannot find variable");e&&(f=this.l(b),this.h.j(f,c),f.top=c.top,c=f)}d=b instanceof x&&!1===d?b:c instanceof x&&!1===e?c:this.l(b,c)}this.h.add(d,b,c);d.top=a;this.F<this.o.length-
    1&&(this.v(b),this.v(c))};g.prototype.ra=function(a){var b=a.left.type===k.operator?[a.left,a.right]:[a.right,a.left];var c=b[0];b=b[1];var d=this.C(c),e=this.D(c,this.H);if(null!==d)if(0==e){var f=d;this.X(f.top)!==Number.POSITIVE_INFINITY&&(c=this.R(),this.h.j(c,f.top))}else f=this.l(d);else{d=this.M(c);if(null===d)throw Error("Error: Cannot find operator");e&&(c=this.l(),this.h.j(c,d),c.top=d.top,d=c)}null===f&&(f=this.l(d));this.h.add(f,d,b);f.top=a;this.F<this.o.length-1&&this.v(d)};g.prototype.wa=
    function(a){var b=a.left.type===k.A;var c=a.left.type===k.A?[a.left,a.right]:[a.right,a.left];var d=c[0];c=c[1];var e=this.C(d),f=null,m=this.D(d,this.H);null!==e?0==m&&(f=e):m?(e=this.l(),this.h.j(e,d),e.top=d.top):(e=new y(d.text),e.top=d);null==f&&(f=this.l(e));f.top=a;b?this.h.add(f,e,c):this.h.add(f,c,e);this.F<this.o.length-1&&this.v(e)};g.prototype.Z=function(){for(var a=0;a<this.u.length;a++)if(this.u[a].U)return!0;return!1};g.prototype.xa=function(a){var b=this.C(a.left),c=this.C(a.right);
    var d=this.D(a.left,this.W);var e=this.D(a.right,this.W);if(null!==b&&null!==c)d=0==d?b:0==e?c:this.l(b,c);else{if(a.left===a.right)if(d){var f=this.l(c);this.h.j(f,a.left);f.top=a.left.top;c=b=f}else b=a.left,c=a.right;else null===b&&(d?(f=this.l(c),this.h.j(f,a.left),f.top=a.left.top,b=f):b=a.left),null===c&&(e?(f=this.l(b),this.h.j(f,a.right),f.top=a.right.top,c=f):c=a.right);d=b instanceof x&&!1===d?b:c instanceof x&&!1===e?c:this.l(b,c)}this.h.add(d,b,c);d.top=a;this.F<this.o.length-1&&(this.v(b),
    this.v(c))};g.prototype.sa=function(a){var b=a.left.type===k.A;var c=b?[a.left,a.right]:[a.right,a.left];var d=c[0];var e=c[1];c=this.C(d);var f=this.C(e),m=this.D(d,this.W);e=this.D(e,this.H);if(null!==c&&null!==f){if(this.Z()&&this.s(a.left)&&!1===this.s(a.right)&&0!=m&&0==e&&(d=f,this.X(d.top)!==Number.POSITIVE_INFINITY)){var l=this.R();this.h.j(l,d.top)}}else if(null===c&&(m?(l=this.l(f),this.h.j(l,d),l.top=d.top,c=l):(c=new y(d.text),c.top=d.top)),null===f){f=this.M(a.right);if(null===f)throw Error("Error: Cannot find variable");
    e&&(l=this.l(c),this.h.j(l,f),l.top=f.top,f=l)}d=this.Z()&&this.s(a.left)&&this.s(a.right)?this.l(c,f):0==b?f instanceof x&&0==e?f:c instanceof x&&0==m?c:this.l(c,f):c instanceof x&&0==m?c:f instanceof x&&0==e?f:this.l(c,f);!1===b?this.h.add(d,c,f):this.h.add(d,f,c);d.top=a;this.F<this.o.length-1&&(this.v(c),this.v(f))};g.prototype.Xa=function(a){if(a.left.type===k.G&&a.right.type===k.G)this.Ya(a);else if(a.left.type===k.operator&&a.right.type===k.G||a.left.type===k.G&&a.right.type===k.operator)this.Za(a);
    else if(a.left.type===k.operator&&a.right.type===k.operator)this.ab(a);else if(a.left.type===k.G&&a.right.type===k.A||a.right.type===k.G&&a.left.type===k.A)this.bb(a);else if(a.right.type===k.A&&a.left.type===k.A)this.cb(a);else if(a.right.type===k.A&&a.left.type===k.operator||a.right.type===k.operator&&a.left.type===k.A)this.$a(a);else throw Error("Error: Unknown operator for sub-expression");};g.prototype.Ya=function(a){var b=this.l();this.h.sub(b,a.left,a.right);b.top=a};g.prototype.ab=function(a){var b=
    this.C(a.left),c=this.C(a.right);var d=this.D(a.left,this.H);var e=this.D(a.right,this.H);if(null!==b&&null!==c)if(this.Z()&&this.s(a.left)&&this.s(a.right))d=this.l(b,c);else if(0==d){if(d=b,this.X(d.top)!==Number.POSITIVE_INFINITY){var f=this.R();this.h.j(f,d.top)}}else d=this.l(b,c);else{if(null===b){b=this.M(a.left);if(null===b)throw Error("Error: Cannot find variable");d&&(f=this.l(c),this.h.j(f,b),f.top=b.top,b=f)}if(null===c){c=this.M(a.right);if(null===c)throw Error("Error: Cannot find variable");
    e&&(f=this.l(b),this.h.j(f,c),f.top=c.top,c=f)}d=b instanceof x&&!1===d?b:this.l(b,c)}this.h.sub(d,b,c);d.top=a;this.F<this.o.length-1&&(this.v(b),this.v(c))};g.prototype.Za=function(a){var b=a.left.type===k.operator;var c=b?[a.left,a.right]:[a.right,a.left];var d=c[0];c=c[1];var e=this.C(d),f=null,m=this.D(d,this.H);if(null!==e)0==m&&b&&(f=e,this.X(f.top)!==Number.POSITIVE_INFINITY&&(d=this.R(),this.h.j(d,f.top)));else{e=this.M(d);if(null===e)throw Error("Error: Cannot find operator");m&&(d=this.l(),
    this.h.j(d,e),d.top=e.top,e=d)}null===f&&(f=this.l(e));this.h.sub(f,e,c);f.top=a;this.F<this.o.length-1&&this.v(e)};g.prototype.bb=function(a){var b=a.left.type===k.A;var c=b?[a.left,a.right]:[a.right,a.left];var d=c[0];c=c[1];var e=this.C(d),f=null,m=this.D(d,this.W);null!==e?0==m&&b&&(f=e):m?(b=this.l(),this.h.j(b,d),b.top=d.top,e=b):(e=new y(d.text),e.top=d);null===f&&(f=this.l(e));this.h.sub(f,e,c);f.top=a;this.F<this.o.length-1&&this.v(e)};g.prototype.cb=function(a){var b=this.C(a.left),c=this.C(a.right),
    d,e=this.D(a.left,this.W),f=this.D(a.right,this.W);null!==b&&null!==c?0==e&&(d=b):(a.left===a.right?e?(d=this.l(c),this.h.j(d,a.left),d.top=a.left.top,c=b=d):(b=a.left,c=a.right):(null===b&&(e?(d=this.l(c),this.h.j(d,a.left),d.top=a.left.top,b=d):b=a.left),null===c&&(f?(d=this.l(b),this.h.j(d,a.right),d.top=a.right.top,c=d):c=a.right)),d=b instanceof x&&!1===e?b:c instanceof x&&!1===f?c:this.l(b,c));this.h.sub(d,b,c);d.top=a;this.F<this.o.length-1&&(this.v(b),this.v(c))};g.prototype.$a=function(a){var b=
    a.left.type===k.A;var c=b?[a.left,a.right]:[a.right,a.left];var d=c[0];var e=c[1];c=this.C(d);var f=this.C(e),m=this.D(d,this.W);e=this.D(e,this.H);if(null===c||null===f){if(null===c)if(m){var l=this.l(f);this.h.j(l,d);l.top=d.top;c=l}else c=new y(d.text),c.top=d.top;if(null===f){f=this.M(a.right);if(null===f)throw Error("Error: Cannot find variable");e&&(l=this.l(c),this.h.j(l,f),l.top=f.top,f=l)}}d=this.Z()&&this.s(a.left)&&this.s(a.right)?this.l(c,f):0==b?f instanceof x&&0==e?f:this.l(c,f):c instanceof
    x&&0==m?c:this.l(c,f);!1===b?this.h.sub(d,f,c):this.h.sub(d,c,f);d.top=a;this.F<this.o.length-1&&(this.v(c),this.v(f))};g.prototype.Ca=function(a){if(a.left.type===k.G&&a.right.type===k.G)this.Fa(a);else if(a.left.type===k.operator&&a.right.type===k.G)this.Ga(a);else if(a.left.type===k.G&&a.right.type===k.operator)this.Da(a);else if(a.left.type===k.operator&&a.right.type===k.operator)this.Ia(a);else if(a.right.type===k.G&&a.left.type===k.A)this.Ja(a);else if(a.left.type===k.G&&a.right.type===k.A)this.Ea(a);
    else if(a.right.type===k.A&&a.left.type===k.A)this.La(a);else if(a.right.type===k.A&&a.left.type===k.operator)this.Ha(a);else if(a.right.type===k.operator&&a.left.type===k.A)this.Ka(a);else throw Error("Error: Unknown operator for idiv-expression");this.g.top=a;this.da()};g.prototype.Fa=function(a){var b=this.u[0];this.m(b);this.I.j(b,a.left);this.m(this.u[3]);var c=this.l(b,this.u[3]);this.I.j(c,a.right);b.top=a.left;c.top=a.right;this.h.T(c);b.top=a};g.prototype.Ia=function(a){var b,c,d=null!==
    (b=this.C(a.left))&&void 0!==b?b:this.M(a.left);b=null!==(c=this.C(a.right))&&void 0!==c?c:this.M(a.right);if(d instanceof x&&b instanceof x)d.top!==this.u[0].top&&(b.top===this.u[0].top?(this.h.B(d,b),b=[b,d],d=b[0],b=b[1]):(this.h.B(d,this.u[0]),d=this.g)),b.top===this.i.top?(c=this.l(this.u[0],this.u[3]),this.h.j(c,b),b.top=null,b=c):this.m(this.i),this.s(d.top)&&(this.D(d.top,this.H)?(c=this.l(this.u[0],this.u[3],b),this.h.j(c,d)):(c=this.R(),this.h.j(c,d)));else if(d instanceof x){d.top!==this.g.top&&
    (this.h.B(d,this.g),d=this.g);this.m(this.u[3]);var e=void 0;this.s(d.top)&&(this.D(d.top,this.H)?(e=this.l(this.u[0],this.u[3]),this.h.j(e,d)):(c=this.R(),this.h.j(c,d)));this.s(b.top)&&this.D(b.top,this.H)&&(c=this.l(this.u[0],this.u[3],e),this.h.j(c,b),b=c)}else b instanceof x?b===this.g&&(c=this.l(this.g,this.i),this.h.j(c,b),this.m(this.i),this.h.j(b,d),d=b,b=c,this.s(d.top)&&this.D(d.top,this.H)&&(c=this.l(this.g,this.i,b),this.I.j(c,d))):(this.h.B(this.g,d),d=this.g,c=null,this.m(this.i),this.s(d.top)&&
    this.D(d.top,this.H)&&(c=this.l(this.g,this.i,b),this.h.j(c,d)),this.s(b.top)&&this.D(b.top,this.H)&&(c=this.l(this.g,this.i,c),this.h.j(c,d)));if(d!==this.g)throw Error("Error: Dilene is not AX");this.h.T(b);d.top=a;this.F<this.o.length-1&&(this.v(this.g),this.v(this.K),this.v(this.L),this.v(this.i))};g.prototype.Da=function(a){var b,c=null!==(b=this.C(a.right))&&void 0!==b?b:this.M(a.right);if(null===c)throw Error("Error: Unknown IVariable");if(c instanceof x)if(c===this.g){b=this.l(this.g,this.i);
    this.h.j(b,c);c=b;this.h.j(this.g,a.left);var d=this.g}else c===this.i&&(b=this.l(this.i,this.g),this.h.j(b,c),c=b,this.m(this.g,this.g,this.i,c),this.h.j(this.g,a.left),d=this.g);else this.s(c.top)&&this.D(c.top,this.H)&&(b=this.l(this.g,this.i),this.h.j(b,c),c=b);d!==this.g&&(this.m(this.g,this.g,this.i,c),this.h.j(this.g,a.left),d=this.g);this.m(this.i,this.g,this.i,c);this.h.T(c);d.top=a;this.F<this.o.length-1&&(this.v(this.g),this.v(this.K),this.v(this.L),this.v(this.i))};g.prototype.Ga=function(a){var b,
    c=null!==(b=this.C(a.left))&&void 0!==b?b:this.M(a.left);b=null;if(null===c)throw Error("Error: Unknown variable operator");c instanceof x?(c!==this.g&&this.h.j(this.g,c),c===this.i&&(this.s(c.top)&&(this.D(c.top,this.H)?(b=this.l(this.g,this.i),this.h.j(b,c)):this.ea(c)),c.top=null)):(this.m(this.g,this.g,this.i),this.h.j(this.g,c),this.s(c.top)&&(this.D(c.top,this.H)?(b=this.l(this.g,this.i),this.h.j(b,c)):this.ea(c)));c=this.l(this.g,this.i,b);this.V(this.g,this.g,c,this.i);this.h.j(c,a.right);
    this.ea(this.i);this.h.T(c);this.F<this.o.length-1&&(this.v(this.g),this.v(this.K),this.v(this.L),this.v(this.i))};g.prototype.Ea=function(a){var b=this.C(a.right);if(null===b){b=new y(a.right.text);b.top=a.right;var c=this.P(b,this.g,this.i)}else c=this.P(b,this.g,this.i);null!==c&&(c.top=b.top,b=c);this.m(this.g,this.g,this.i,b);this.h.j(this.g,a.left);this.h.T(b);this.g.top=a;this.F<this.o.length-1&&(this.v(this.g),this.v(this.K),this.v(this.L),this.v(this.i))};g.prototype.Ja=function(a){var b=
    this.C(a.left);null===b?(b=new y(a.left.text),b.top=a.left,this.m(this.g,this.g,this.i),this.h.j(this.g,b),b=this.g):b!==this.g&&(this.m(this.g,this.g,this.i),this.h.j(this.g,b),b=this.g);var c=this.P(b,this.g,this.i);null!==c&&(c.top=b.top);this.m(this.i,this.g,this.i);c=this.l(this.g,this.i,c);this.h.j(c,a.right);this.h.T(c);b.top=a;this.F<this.o.length-1&&(this.v(this.g),this.v(this.K),this.v(this.L),this.v(this.i))};g.prototype.La=function(a){var b=this.C(a.left);var c=this.C(a.right);null===
    b&&(b=new y(a.left.text),b.top=a.left);null===c&&(c=new y(a.right.text),c.top=a.right);b instanceof x?c===this.g?(this.h.B(b,c),c=[c,b],b=c[0],c=c[1]):b!==this.g&&(this.m(this.g,this.g,this.i,c),this.h.j(this.g,b),b=this.g):(c instanceof x?c===this.g?(c=this.P(c,this.g,this.i),null===c&&(c=new y(a.right.text),c.top=a.right)):(this.m(this.g,this.g,this.i,c),c===this.i&&(c=this.P(c,this.g,this.i),null===c&&(c=new y(a.right.text),c.top=a.right))):this.m(this.g,this.g,this.i,c),this.h.j(this.g,b),b=this.g);
    if(b!==this.g)throw Error("Error: left must be AX");this.m(this.i,this.g,this.i,c);var d=this.P(b,this.g,this.i,c);null!==d&&(d.top=this.g.top);this.h.T(c);b.top=a;this.F<this.o.length-1&&(this.v(this.g),this.v(this.K),this.v(this.L),this.v(this.i))};g.prototype.Ha=function(a){var b,c=this.C(a.right);if(null===c&&(c=new y(a.right.text),c.top=a.right,this.s(c.top)&&this.D(c.top,this.H))){var d=this.l(this.u[0],this.u[3]);this.h.j(d,c);c=d}var e=null!==(b=this.C(a.left))&&void 0!==b?b:this.M(a.left);
    if(null===e)throw Error("Error: Unknown variable");e!==this.g&&(c===this.g?(this.h.B(c,e),b=[e,c],c=b[0],e=b[1]):(this.h.B(e,this.g),e=this.g));this.m(this.i);this.s(e.top)&&this.D(e.top,this.H)&&(d=this.l(this.u[0],this.u[3],c),this.I.j(d,e));this.h.T(c);e.top=a;this.F<this.o.length-1&&(this.v(this.g),this.v(this.K),this.v(this.L),this.v(this.i))};g.prototype.Ka=function(a){var b,c=this.C(a.left);var d=null!==(b=this.C(a.right))&&void 0!==b?b:this.M(a.right);if(null===d)throw Error("Error: Unknown variable");
    null===c&&(c=new y(a.left.text),c.top=a.left,b=this.P(c,d,this.g,this.i),null!==b&&(c=b));c instanceof x?c!==this.g&&(d===this.g?(this.h.B(c,d),d=[d,c],c=d[0],d=d[1]):(this.h.B(c,this.g),c=this.g)):(d===this.g&&(b=this.l(this.g,this.i),this.h.j(b,d),d=b),this.h.j(this.g,c),c=this.g);this.P(c,this.g,this.i,d);this.m(this.i);this.h.T(d);c.top=a;this.da()};g.prototype.da=function(){this.F<this.o.length-1&&(this.v(this.g),this.v(this.K),this.v(this.L),this.v(this.i))};g.prototype.Ma=function(a){if(a.left.type===
    k.G&&a.right.type===k.G)this.Pa(a);else if(a.left.type===k.G&&a.right.type===k.operator||a.left.type===k.operator&&a.right.type===k.G)this.Na(a);else if(a.left.type===k.operator&&a.right.type===k.operator||a.right.type===k.G&&a.left.type===k.A)this.Ra(a);else if(a.left.type===k.G&&a.right.type===k.A)this.Oa(a);else if(a.right.type===k.A&&a.left.type===k.A)this.Sa(a);else if(a.right.type===k.A&&a.left.type===k.operator||a.right.type===k.operator&&a.left.type===k.A)this.Qa(a);else throw Error("Error: Unknown operator for idiv-expression");
    this.g.top=a;this.i.top=null;this.da()};g.prototype.Pa=function(a){this.m(this.g,this.g,this.i);this.m(this.i,this.g,this.i);this.h.j(this.g,a.left);this.h.j(this.i,a.right);this.g.top=a.left;this.i.top=a.right;this.h.imul(this.i)};g.prototype.Ra=function(a){var b=this.C(a.left),c=this.C(a.right),d=null,e=null;b===this.g?e=b:c===this.g&&(e=c);if(a.left===a.right)null===b&&(b=this.M(a.left),this.l(this.i,this.K,this.L),this.g.top=b.top,e=b=this.g),e===this.g?(this.V(b,this.g,this.i),this.h.imul(this.g)):
    b===this.i?(this.l(this.K,this.L,this.i),this.h.j(this.g,this.i),this.h.imul(this.i)):(this.D(b.top,this.H)?(this.m(this.g,this.g,this.K,this.L,this.i),this.h.j(this.g,b)):(this.V(b,this.g,this.K,this.L,this.i),this.h.B(this.g,b)),this.h.imul(this.g));else{if(null===b){b=this.M(a.left);var f=null;this.D(b.top,this.H)&&(f=this.V(b,this.i,c));null!==f?b=f:d=b}null===c&&(c=this.M(a.right),f=null,this.D(b.top,this.H)&&(f=this.V(b,this.i,c)),null!==f?c=f:null===d?d=c:null===e&&(this.m(this.g,this.g,this.i),
    this.h.j(this.g,c),this.g.top=c.top,e=c=this.g));if(null===d)if(b===this.i&&b!==e)d=b,null===e&&(!1===this.s(c.top)?this.h.B(c,this.g):(this.m(this.g,this.g,c,this.i),this.h.j(this.g,c)),e=this.g);else if(c===this.i&&c!==e)d=c,null===e&&(!1===this.s(b.top)?this.h.B(b,this.g):(this.m(this.g,this.g,b,this.i),this.h.j(this.g,b)),e=this.g);else if(!1===this.s(b.top)&&e!=b)this.h.B(b,this.i),d=b=this.i,null===e&&(!1===this.s(c.top)?this.h.B(c,this.g):(this.m(this.g,this.g,c,this.i),this.h.j(this.g,c)),
    e=this.g);else if(!1===this.s(c.top)&&e!=c)this.h.B(c,this.i),d=c=this.i,null===e&&(!1===this.s(b.top)?this.h.B(b,this.g):(this.m(this.g,this.g,b,this.i),this.h.j(this.g,b)),e=this.g);else if(null===e)this.m(this.g,this.g,this.K,this.L,this.i),this.h.j(this.g,b),e=this.g,d=c;else if(e===b)d=c;else if(e===c)d=b;else throw Error();else null===e&&(!1===this.s(b.top)&&d===c?(this.h.B(b,this.g),e=this.g):!1===this.s(c.top)&&d===b?(this.h.B(c,this.g),e=this.g):(this.m(this.g,this.g,b,this.i),this.h.j(this.g,
    b),this.m(this.g,this.g,this.K,this.L,this.i),d===b?(this.h.j(this.g,c),e=this.g):d===c&&(this.h.j(this.g,b),e=this.g)));d!==this.i&&this.m(this.i,this.g,d,this.i);if(e!==this.g||null===d)throw Error();this.h.imul(d)}};g.prototype.V=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];if(this.s(a.top)){if(this.D(a.top,this.H))return b=this.l.apply(this,b),this.h.j(b,a),b;a instanceof x&&(b=this.R(),this.h.j(b,a))}return null};g.prototype.Na=function(a){var b=a.left.type===k.operator?
    [a.left,a.right]:[a.right,a.left];a=b[0];b=b[1];var c=this.C(a),d=null,e=null;c===this.g&&(e=c,this.m(this.i,this.g,this.i),this.h.j(this.i,b),d=this.i);if(null===c){c=this.M(a);var f=null;this.D(c.top,this.H)&&(f=this.V(c,this.i));null!==f?c=f:(d=c,this.m(this.g,this.g,this.i),this.h.j(this.g,b),e=this.g)}null===d&&(c===this.i?d=c:!1===this.s(a)&&(this.h.B(c,this.i),d=c=this.i),this.m(this.g,this.g,this.i),this.h.j(this.g,b),e=this.g);d!==this.i?this.m(this.i,this.g,d,this.i):this.V(c,this.i,this.g);
    if(e!==this.g||null===d)throw Error();this.h.imul(d)};g.prototype.Oa=function(a){var b=a.left.type===k.A?[a.left,a.right]:[a.right,a.left];a=b[0];b=b[1];var c=this.C(a),d=null,e=null;c===this.g&&(e=c,this.m(this.i,this.g,this.i),this.h.j(this.i,b),d=this.i);if(null===c){c=y.ia(a);var f=this.P(c);null!==f?c=f:(d=c,this.m(this.g,this.g,this.i),this.h.j(this.g,b),e=this.g)}null===d&&(c===this.g?(e=c,this.m(this.i,this.g,this.i),this.h.j(this.i,b),d=this.i):(!1===this.s(a)&&(this.h.B(c,this.i),c=this.i),
    d=c,this.m(this.g,this.g,this.i),this.h.j(this.g,b),e=this.g));d!==this.i?this.m(this.i,this.g,d,this.i):this.V(c,this.i,this.g);if(e!==this.g||null===d)throw Error();this.h.imul(d)};g.prototype.Sa=function(a){var b=this.C(a.left),c=this.C(a.right),d=null,e=null;b===this.g?e=b:c===this.g&&(e=c);if(a.left===a.right)if(null===b&&(b=new y(a.left.text),b.top=a.left.top,this.l(this.i,this.K,this.L),this.h.j(this.g,b),this.g.top=b.top,e=b=this.g),e===this.g){var f=this.P(e,this.g,this.i);null!==f&&(f.top=
    e.top);this.h.imul(this.g)}else b===this.i?(this.l(this.K,this.L,this.i),this.h.j(this.g,this.i),this.h.imul(this.i)):(this.D(b.top,this.W)?(this.m(this.g,this.g,b,this.i),this.h.j(this.g,b)):this.h.B(this.g,b),this.h.imul(this.g));else{null===b&&(b=new y(a.left.text),b.top=a.left.top,f=this.P(b,this.i,c),null!==f?b=f:d=b);null===c&&(c=new y(a.right.text),c.top=a.right.top,f=this.P(c,this.i,b),null!==f?c=f:null===d?d=c:null===e&&(this.m(this.g,this.g,this.i),this.h.j(this.g,c),this.g.top=c.top,e=
    c=this.g));if(null===d)if(b===this.i&&b!==e)d=b,null===e&&(!1===this.s(c.top)?this.h.B(c,this.g):(this.m(this.g,this.g,c,this.i),this.h.j(this.g,c)),e=this.g);else if(c===this.i&&c!==e)d=c,null===e&&(!1===this.s(b.top)?this.h.B(b,this.g):(this.m(this.g,this.g,b,this.i),this.h.j(this.g,b)),e=this.g);else if(!1===this.s(b.top)&&e!=b)this.h.B(b,this.i),d=b=this.i,null===e&&(!1===this.s(c.top)?this.h.B(c,this.g):(this.m(this.g,this.g,c,this.i),this.h.j(this.g,c)),e=this.g);else if(!1===this.s(c.top)&&
    e!=c)this.h.B(c,this.i),d=c=this.i,null===e&&(!1===this.s(b.top)?this.h.B(b,this.g):(this.m(this.g,this.g,b,this.i),this.h.j(this.g,b)),e=this.g);else if(null===e)this.m(this.g,this.g,this.K,this.L,this.i),this.h.j(this.g,b),e=this.g,d=c;else if(e===b)d=c;else if(e===c)d=b;else throw Error();else null===e&&(!1===this.s(b.top)&&d===c?(this.h.B(b,this.g),e=this.g):!1===this.s(c.top)&&d===b?(this.h.B(c,this.g),e=this.g):(this.m(this.g,this.g,b,this.i),this.h.j(this.g,b),this.m(this.g,this.g,this.K,this.L,
    this.i),d===b?(this.h.j(this.g,c),e=this.g):d===c&&(this.h.j(this.g,b),e=this.g)));d!==this.i&&this.m(this.i,this.g,d,this.i);if(e!==this.g||null===d)throw Error();this.h.imul(d)}};g.prototype.Qa=function(a){var b=a.left.type===k.A?[a.left,a.right]:[a.right,a.left];a=b[0];b=b[1];var c=this.C(a),d=this.C(b),e=null,f=null;c===this.g?f=c:d===this.g&&(f=d);null===c&&(c=y.ia(a),a=this.P(c,this.i,d),null!==a?c=a:e=c);null===d&&(d=this.M(b),a=null,this.D(b,this.H)&&(a=this.V(d,this.i,c)),null!==a?d=a:null===
    e?e=d:null===f&&(this.m(this.g,this.g,this.i),this.h.j(this.g,d),this.g.top=d.top,f=d=this.g));if(null===e)if(c===this.i&&c!==f)e=c,null===f&&(!1===this.s(d.top)?this.h.B(d,this.g):(this.m(this.g,this.g,d,this.i),this.h.j(this.g,d)),f=this.g);else if(d===this.i&&d!==f)e=d,null===f&&(!1===this.s(c.top)?this.h.B(c,this.g):(this.m(this.g,this.g,c,this.i),this.h.j(this.g,c)),f=this.g);else if(!1===this.s(c.top)&&f!=c)this.h.B(c,this.i),e=c=this.i,null===f&&(!1===this.s(d.top)?this.h.B(d,this.g):(this.m(this.g,
    this.g,d,this.i),this.h.j(this.g,d)),f=this.g);else if(!1===this.s(d.top)&&f!=d)this.h.B(d,this.i),e=d=this.i,null===f&&(!1===this.s(c.top)?this.h.B(c,this.g):(this.m(this.g,this.g,c,this.i),this.h.j(this.g,c)),f=this.g);else if(null===f)this.m(this.g,this.g,this.K,this.L,this.i),this.h.j(this.g,c),f=this.g,e=d;else if(f===c)e=d;else if(f===d)e=c;else throw Error();else null===f&&(!1===this.s(c.top)&&e===d?(this.h.B(c,this.g),f=this.g):!1===this.s(d.top)&&e===c?(this.h.B(d,this.g),f=this.g):(this.m(this.g,
    this.g,c,this.i),this.h.j(this.g,c),this.m(this.g,this.g,this.K,this.L,this.i),e===c?(this.h.j(this.g,d),f=this.g):e===d&&(this.h.j(this.g,c),f=this.g)));e!==this.i&&this.m(this.i,this.g,e);if(f!==this.g||null===e)throw Error();this.h.imul(e)};g.prototype.P=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];return this.s(a.top)&&this.D(a.top,this.W)?(b=this.l.apply(this,b),this.h.j(b,a),b):null};g.prototype.v=function(a){!1===this.Ba(a.top)&&(a.top=null,a.U=!0)};g.prototype.l=
    function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];for(b=0;b<this.u.length;b++)if(-1===a.indexOf(this.u[b])&&this.u[b].U)return this.u[b];b=Array(this.u.length);for(var c=0;c<this.u.length;c++)b[c]=-1!==a.indexOf(this.u[c])?0:this.X(this.u[c].top);a=Math.max.apply(Math,b);a=this.u[b.indexOf(a)];if(a.top.type===k.A)return a;b=this.R();this.h.j(b,a);return a};g.prototype.ea=function(a){if(!a.U&&a.top.type!==k.A){var b=this.R();this.h.j(b,a)}a.top=null};g.prototype.m=function(a){for(var b=
    this,c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];if(!a.U&&a.top.type!==k.A){var e=function(q){if(!1===c.some(function(v){return v===b.u[q]})&&a.top===f.u[q].top)return a.top=null,{value:!0}},f=this;for(d=0;d<this.u.length;d++)if("object"===typeof e(d))return;var m=null;e=function(q){if(!1===c.some(function(v){return v===b.u[q]})&&(l.u[q].U||l.u[q].top.type===k.A))return m=l.u[q],"break"};var l=this;for(d=0;d<this.u.length&&"break"!==e(d);d++);null!==m?this.h.j(m,a):(d=this.R(),this.h.j(d,
    a))}a.top=null};g.prototype.C=function(a){for(var b=0;b<this.u.length;b++)if(this.u[b].top===a)return this.u[b];return null};g.prototype.M=function(a){for(var b=0;b<this.O.length;b++)if(this.O[b].top===a)return this.O[b];return null};g.prototype.R=function(){for(var a=0;a<this.O.length;a++)if(this.O[a].U||!1===this.s(this.O[a].top))return this.O[a];a=new y("tmp".concat(this.O.length));this.O.push(a);return a};g.prototype.Ba=function(a){for(var b=this.F+1;b<this.o.length;b++)if(this.o[b].aa(a))return!0;
    return!1};g.prototype.X=function(a){for(var b=this.F+1;b<this.o.length;b++)if(this.o[b].aa(a))return b-this.F;return Number.POSITIVE_INFINITY};g.prototype.D=function(a,b){for(var c=this.F+1;c<this.o.length&&!(c>this.F+b);c++)if(this.o[c].aa(a))return!0;return!1};g.prototype.s=function(a){for(var b=this.F+1;b<this.o.length;b++)if(this.o[b].aa(a))return!0;return!1};return g}(),A,B=A||(A={});B[B.register=0]="register";B[B.variable=1]="variable";
    var p=function(){function g(a,b){this.Y=a;this.priority=b}g.ja=function(a){return g.lb.find(function(b){return b.Y===a})};g.lb=[new g("+",0),new g("-",0),new g("*",2),new g("/",2),new g("^",5),new g("(",100),new g(")",100)];return g}(),x=function(){function g(a){this.name=a;this.ib=this.jb=!1;this.U=this.kb=!0;this.ba=null}Object.defineProperty(g.prototype,"top",{get:function(){return this.ba},set:function(a){this.U=null===a;this.ba=a},enumerable:!1,configurable:!0});g.prototype.toString=function(){return this.name};
    return g}(),k,C=k||(k={});C[C.constant=0]="constant";C[C.variable=1]="variable";C[C.operator=2]="operator";C[C.openBracket=3]="openBracket";C[C.closeBracket=4]="closeBracket";
    var n=function(){function g(a,b,c,d){void 0===c&&(c=null);void 0===d&&(d=null);this.type=a;this.text=b;this.right=c;this.left=d;this.top=this}g.prototype.toString=function(){return this.text};g.prototype.isEqual=function(a){if(this.text!==a.text)return!1;if(null!==this.left&&null!==a.left){if(0==this.left.isEqual(a.left))return!1}else if(null==this.left!==(null==a.left))return!1;if(null!==this.right&&null!==a.right){if(0==this.right.isEqual(a.right))return!1}else if(null==this.right!==(null==a.right))return!1;
    return!0};g.prototype.fa=function(a,b){this.left===a&&(this.left=b);this.right===a&&(this.right=b)};g.prototype.Aa=function(a,b){this.fa(a,b);this.left.fa(a,b);this.right.fa(a,b)};g.prototype.aa=function(a){return this.right==a||this.left==a};return g}(),y=function(){function g(a){this.name=a;this.U=!0;this.top=null}Object.defineProperty(g.prototype,"top",{get:function(){return this.ba},set:function(a){this.U=null===a;this.ba=a},enumerable:!1,configurable:!0});g.prototype.toString=function(){return this.name};
    g.ia=function(a){var b=new g(a.text);b.top=a;return b};return g}(),D=new r,h=window.prompt();D.ya();console.log(D.o);D.Ua();console.log(D.o);var E=new z(D.o,D.O),F=new t(E);F.Va();document.getElementById("step").addEventListener("click",function(){F.eb()});